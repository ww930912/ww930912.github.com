<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>阅读之HTML5移动Web开发实战详解 | WUWEI&#39;S BLOG</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="WUWEI">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="generator" content="WUWEI'S BLOG">
    <meta name="author" content="WUWEI">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="http://7xljcv.com1.z0.glb.clouddn.com/img/favicon.ico" type="image/ico">
    <link rel="apple-touch-icon" href="http://7xljcv.com1.z0.glb.clouddn.com/img/favicon3.png"/>
    <link rel="alternate" href="/atom.xml" title="WUWEI&#39;S BLOG" type="application/atom+xml">
    <link rel="stylesheet" href="http://7xljcv.com1.z0.glb.clouddn.com/css/ally.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="http://7xljcv.com1.z0.glb.clouddn.com/highlightjs/vs.css" type="text/css">
    
    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="http://7xljcv.com1.z0.glb.clouddn.com/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="http://7xljcv.com1.z0.glb.clouddn.com/js/jquery-1.11.2.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.2.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="http://7xljcv.com1.z0.glb.clouddn.com/js/html5shiv.min.js"></script>
    <script src="http://7xljcv.com1.z0.glb.clouddn.com/js/respond.min.js"></script>
    <![endif]-->

    <!-- baidu_tongji -->
    

    <script type="text/javascript">
    //iOS Web APP
    if(("standalone" in window.navigator) && window.navigator.standalone){
      var noddy, remotes = false;
      document.addEventListener('click', function(event) {
        noddy = event.target;
        while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
          noddy = noddy.parentNode;
        }
        if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes)){
          event.preventDefault();
          document.location.href = noddy.href;
        }
      },false);
    }
    </script>
</script>





  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  
  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="http://7xljcv.com1.z0.glb.clouddn.com/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            
        	<li>
        		<a class="sb-toggle-submenu">TYPES<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/App/" class="animsition-link">App<small>(6)</small></a></li>
				    
				    <li><a href="/categories/Browser/" class="animsition-link">Browser<small>(1)</small></a></li>
				    
				    <li><a href="/categories/CSS/" class="animsition-link">CSS<small>(2)</small></a></li>
				    
				    <li><a href="/categories/Cordova/" class="animsition-link">Cordova<small>(5)</small></a></li>
				    
				    <li><a href="/categories/HTML/" class="animsition-link">HTML<small>(3)</small></a></li>
				    
				    <li><a href="/categories/Hexo/" class="animsition-link">Hexo<small>(1)</small></a></li>
				    
				    <li><a href="/categories/JavaScript/" class="animsition-link">JavaScript<small>(5)</small></a></li>
				    
				    <li><a href="/categories/Life/" class="animsition-link">Life<small>(10)</small></a></li>
				    
				    <li><a href="/categories/MVVM/" class="animsition-link">MVVM<small>(4)</small></a></li>
				    
				    <li><a href="/categories/Markdown/" class="animsition-link">Markdown<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Tools/" class="animsition-link">Tools<small>(2)</small></a></li>
				    
				    <li><a href="/categories/架构/" class="animsition-link">架构<small>(2)</small></a></li>
				    
				    <li><a href="/categories/驾考/" class="animsition-link">驾考<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://yanyaner.com/" class="animsition-link">yanyaner</a></li>
                    
                    <li><a href="http://bakbio.cn/" class="animsition-link">zhangli</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="http://7xljcv.com1.z0.glb.clouddn.com/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">WUWEI'S BLOG</a></li>
                            <li class="nolink"><span>Never </span>Give up.</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

        <section id="hero" class="scrollme">
            <div class="container-fluid element-img" style="background: url(http://7xljcv.com1.z0.glb.clouddn.com/2016/04/23/1.jpg) no-repeat center center fixed;background-size: cover">
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                        <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                            <div>
                            	
                                <h2>STAY <span>HUNGRY</span> , STAY <span>FOOLISH</span>.</h2>
                                <p></p>
				    			
                                <h2></h2>
                                <p>求知若饥，虚心若愚。</p>
				    			

                            </div>
                        </div>
                    </div>
                    <!-- // .col-md-12 -->
                </div>
                <div class="herofade beige-dk"></div>
            </div>
        </section>

        <!-- Height spacing helper -->
        <div class="heightblock"></div>
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2015-11-18T13:23:56.000Z" itemprop="datePublished">
          2015-11-18
      </time>
    
    
    | 
    <a href='/tags/HTML/'>HTML</a>
    
    
</span>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span id="busuanzi_container_page_pv">浏览:<span id="busuanzi_value_page_pv"></span></span>
                <h1>阅读之HTML5移动Web开发实战详解</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h2 id="第一章-移动互联网的浪潮之巅"><a href="#第一章-移动互联网的浪潮之巅" class="headerlink" title="第一章 移动互联网的浪潮之巅"></a>第一章 移动互联网的浪潮之巅</h2><p>HTML是用来承载信息的载体，那么HTML5是用来承载更多更强大信息的载体。<br>Web标准的精髓不仅仅在于内容结构、表现和行为的分离，更在于提供结构化互联网信息的工具。</p>
<p>Web标准就是降低开发复杂度，简化代码的规范。</p>
<p>Web语义化指让机器理解内容。</p>
<p>爬虫程序是一种自动访问互联网页面并收集信息以供人们检索的程序。</p>
<h3 id="HTML5有八个类别："><a href="#HTML5有八个类别：" class="headerlink" title="HTML5有八个类别："></a>HTML5有八个类别：</h3><ol>
<li><p>图像和特效<br>SVG、Canvas、WebGL</p>
</li>
<li><p>通信<br>Web Socket、Server-Sent Events</p>
</li>
<li><p>设备访问<br>Orientation API、Geolocation API</p>
</li>
<li><p>多媒体<br>Video、Audio</p>
</li>
<li><p>离线存储<br>HTML5 App Cache、Local Storage、Indexed DB、File API</p>
</li>
<li><p>性能和集成<br>Web Worker</p>
</li>
<li><p>语义网<br>语义化标签 header、footer等</p>
</li>
<li><p>呈现<br>CSS3</p>
</li>
</ol>
<hr>
<h2 id="第二章-HTML5基础"><a href="#第二章-HTML5基础" class="headerlink" title="第二章 HTML5基础"></a>第二章 HTML5基础</h2><h3 id="2-1-HTML的核心要素：标签"><a href="#2-1-HTML的核心要素：标签" class="headerlink" title="2.1 HTML的核心要素：标签"></a>2.1 HTML的核心要素：标签</h3><hr>
<h3 id="2-2-HTML的语义来源：元素名称、元素属性"><a href="#2-2-HTML的语义来源：元素名称、元素属性" class="headerlink" title="2.2 HTML的语义来源：元素名称、元素属性"></a>2.2 HTML的语义来源：元素名称、元素属性</h3><hr>
<h3 id="2-3-HTML5的元素和属性："><a href="#2-3-HTML5的元素和属性：" class="headerlink" title="2.3 HTML5的元素和属性："></a>2.3 HTML5的元素和属性：</h3><h4 id="2-3-1-全局属性"><a href="#2-3-1-全局属性" class="headerlink" title="2.3.1 全局属性"></a>2.3.1 全局属性</h4><p>常用属性：id、class、style、lang、translate、dir、title、accesskey、tabindex<br>contenteditable、contextmenu、draggable、dropzone、hidden、spellcheck、data-*</p>
<hr>
<p>事件处理属性（默认前面加on）：<br>Window事件：<br>load、unload<br>afterprint、beforeprint、beforeunload、error、haschange、message、offline、online、page hide、pageshow、pop state、redo、resize、storage、undo</p>
<p>Form事件：<br>blur、change、focus、reset、select、submit<br>contextmenu、formchange、forminput、input、invalid</p>
<p>Keyboard事件：<br>keydown、keypress、keyup</p>
<p>Mouse事件：<br>click、dbclick、drop、mousedown、mousemove、mouseup、mouseover、mousemouseout<br>drag、dragstart、dragenter、dragend、dragover、dragleave、mousewheel、scroll</p>
<p>Media事件：<br>abort、waiting<br>canplay、canplaythrough、durationchange、emptied、ended、error、loadeddata、loadedmetadata、loadstart、pause、play、playing、progress、ratechange、readystatechange、seeked、seeking、stalled、suspend、timeupdate、volumchange</p>
<hr>
<h4 id="2-3-2-HTML5与它的全局变量"><a href="#2-3-2-HTML5与它的全局变量" class="headerlink" title="2.3.2 HTML5与它的全局变量"></a>2.3.2 HTML5与它的全局变量</h4><p>1）contentEditable属性：元素内容是否可编辑<br>2）contextmenu属性：设置右键菜单属性<br>3）draggable属性：元素是否可拖动<br>dropzone属性：元素是否可放置拖拽的元素<br>4）hidden属性：设置元素不再与页面相关<br>5）spellcheck属性：是否对元素进行拼写和语法检查<br>6）data-*属性：自定义属性来存储数据</p>
<hr>
<h4 id="2-3-3-元素分类与内容模型（Content-Model）"><a href="#2-3-3-元素分类与内容模型（Content-Model）" class="headerlink" title="2.3.3 元素分类与内容模型（Content Model）"></a>2.3.3 元素分类与内容模型（Content Model）</h4><p>HTMLL元素所能表达的内容的描述及与这些元素如何互相作用的描述叫内容模型。<br>简单说就是不能按照之前用CSS的样式来把HTML元素划分成块级元素、内联元素，而是按照内容模型来划分。<br>内容模式大致分成七类：</p>
<ul>
<li>Metadata</li>
<li>Flow</li>
<li>Sectioning</li>
<li>Heading</li>
<li>Phrasing</li>
<li>Embedded</li>
<li>Interactive</li>
</ul>
<p>HTML中的每个元素都可以是上面分类的零个或多个。<br>1）元数据式内容（Metadata content）<br>指head元素之间的元素，如：base、command、link、meta、noscript、script、style、title</p>
<p>2）流式内容（Flow content）<br>指文档大部分元素，如：div、p</p>
<p>3）章节式内容（Sectioning Content）<br>指用于定义标题与页脚范围之间的元素，如：article、aside、nav、section</p>
<p>4）标题式内容（Heading Content）<br>指定义标题的元素，如：h1~h6，hgroup</p>
<p>5）段落式内容（Phrasing Content）<br>指段落内的元素，如：a、span、abbr</p>
<p>6）嵌入式内容（Embedded Content）<br>指当前文档引用到其他资源的元素，如：audio、canvas、embed、iframe、img、object、svg、video</p>
<p>7)交互式内容（Interactive Content）<br>指与用户发生交互的元素，如：form、input</p>
<hr>
<h4 id="2-3-4-文档元数据"><a href="#2-3-4-文档元数据" class="headerlink" title="2.3.4 文档元数据"></a>2.3.4 文档元数据</h4><p>1）title：文档的标题或名称，标签之间是纯文本<br>2）base：文档的基地址及链接打开方式<br>3）link：引用文档其他资源<br>4）meta：提供页面元信息</p>
<hr>
<h4 id="2-3-5-区块内容"><a href="#2-3-5-区块内容" class="headerlink" title="2.3.5 区块内容"></a>2.3.5 区块内容</h4><p>该类标签如下：</p>
<ul>
<li>body</li>
<li>article</li>
<li>section</li>
<li>nav</li>
<li>aside</li>
<li>h1~h2、hgroup</li>
<li>header、footer</li>
<li>address</li>
</ul>
<p>1）article：用来定义内容可单独发布或重用的文档、页面、应用等。如：一篇帖子、文章、评论甚至一个页面交互组件</p>
<p>2）section：用来定义需要出现在文档的提纲中的章节或区块。如：一篇文章的章节</p>
<p>3）nav：用来定义导航区块。如：导航栏</p>
<p>4）aside：用来定义当前已有内容的相关内容。如：一篇文章的相关背景、广告、引述、评论等</p>
<p>5）h1~h6：用来定义区块的标题，h1级别最高<br>hgroup：用来定义多个级别的标题，如：标题和副标题</p>
<p>6）header：用来定义头部的内容，footer：用来定义底部的内容。如：目录标题、搜索框、logo、友情链接等<br>与前面的article、section、nav、aside相比，header和footer不具备产生大纲视图的特性。</p>
<p>7）address：用来定义它最近的父级article或body元素里内容相关的联系信息。</p>
<hr>
<h4 id="2-3-6-分组内容"><a href="#2-3-6-分组内容" class="headerlink" title="2.3.6 分组内容"></a>2.3.6 分组内容</h4><p>p：段落<br>hr：水平线<br>pre：已排版的内容<br>blockquote：引用来自其他来源的内容<br>ol：有序列表<br>ul：无序列表<br>li：列表项<br>dl：定义列表<br>dt：定义的项目<br>dd：定义的描述<br>div： 块级元素<br>figure：定义插图注解、图表、照片、代码列表等<br>figcaption：figure元素的标题</p>
<hr>
<h4 id="2-3-7-文本内容"><a href="#2-3-7-文本内容" class="headerlink" title="2.3.7 文本内容"></a>2.3.7 文本内容</h4><p>a：超链接<br>em：强调<br>strong：内容重要性<br>small：旁注，如免责声明、使用条款、版权信息等<br>s：有误文本，如商品标价<br>cite：作品标题的引用，如书影音画等<br>q：短引用，如某人的一句话<br>dfn：定义的实例，通常用来定义术语<br>abbr：缩写词，可以配合dfn定义术语<br>code：计算机代码<br>var：定义变量<br>samp：计算机程序的输出<br>kbd：用户输入（按键），如：Enter<br>sub：下标文本<br>sup：上标文本<br>i：斜体<br>b：粗体<br>u：下划线<br>bdo：定义文本显示的方向<br>span：无语义<br>br：换行<br>wbr：规定在文本中的何处适合添加换行符<br>data：为元素赋予机器可读的数据<br>time：data标签的时间格式版本<br>mark：标记或高亮文本<br>ruby，rt，rp：注音标示<br>bdi：定义文本的文本方向，如：双向文本排版</p>
<hr>
<h4 id="2-3-8-修改记录"><a href="#2-3-8-修改记录" class="headerlink" title="2.3.8 修改记录"></a>2.3.8 修改记录</h4><p>ins，del：表示文档的增删改记录。</p>
<hr>
<h4 id="2-3-9-嵌入内容"><a href="#2-3-9-嵌入内容" class="headerlink" title="2.3.9 嵌入内容"></a>2.3.9 嵌入内容</h4><p>1）img：图片</p>
<p>2）iframe：窗体</p>
<p>3）embed：Flash插件、视频</p>
<p>4）object：视频</p>
<p>5）vidoe：视频、audio：音频</p>
<p>6）canvas：游戏、3D/2D效果</p>
<p>7）mathml：数学公式</p>
<p>8）svg：渲染</p>
<hr>
<h4 id="2-3-10-表格数据"><a href="#2-3-10-表格数据" class="headerlink" title="2.3.10 表格数据"></a>2.3.10 表格数据</h4><p>table：表格<br>caption：表格标题<br>colgroup：对表格中的列进行组合<br>col：表示列<br>tbody：一段表格主体<br>thead：表格表头<br>tfoot：表格的页脚<br>tr：表格中的行<br>td：表格中的单元格<br>th：表格表头中的单元格</p>
<hr>
<h4 id="2-3-11-HTML5表单"><a href="#2-3-11-HTML5表单" class="headerlink" title="2.3.11 HTML5表单"></a>2.3.11 HTML5表单</h4><p>HTML5给表单input输入框提供了很多类型及更丰富的属性。</p>
<hr>
<h4 id="2-3-12-input元素和其属性"><a href="#2-3-12-input元素和其属性" class="headerlink" title="2.3.12 input元素和其属性"></a>2.3.12 input元素和其属性</h4><p>input的type值可以为：email、tel、url、serach、color、number、range、date等。</p>
<p>required属性：该字段必须要填写才能提交<br>autocomplete属性：填写该文本时会出现记录以前填写时的内容<br>placeholder属性：文本框提示<br>pattern属性：该文本输入的内容需要通过该正则验证后才能提交<br>min属性：最小值 type值为number时<br>max属性：最大值 type值为number时<br>step属性：调整数字的步长 type值为number时<br>list属性：配合datalist元素，可实现自动提示功能<br>autofocus属性：自动聚焦到搜索框内</p>
<hr>
<p>后头直接省略，理由：浏览器对HTML5表单的兼容性还有很长一段路要走。</p>
<hr>
<h2 id="第三章-初探CSS3"><a href="#第三章-初探CSS3" class="headerlink" title="第三章 初探CSS3"></a>第三章 初探CSS3</h2><h4 id="3-2-1-特殊性"><a href="#3-2-1-特殊性" class="headerlink" title="3.2.1 特殊性"></a>3.2.1 特殊性</h4><p>比如多个CSS样式操作同一个元素的背景色，其最终样式取决于特殊性的加权结果。组合特殊性值越大，该样式对元素起作用。基本规则如下：</p>
<ul>
<li>1.内联样式，及使用style属性的 +1</li>
<li>2.使用元素或伪元素选择器(:before) +1</li>
<li>3.使用类或伪类选择器(:hover) +1</li>
<li>4.使用ID选择器 +1</li>
</ul>
<hr>
<h4 id="3-6-1-透视-perspective"><a href="#3-6-1-透视-perspective" class="headerlink" title="3.6.1 透视 perspective"></a>3.6.1 透视 perspective</h4><p>  /<em> 透视深度</em>/<br>  -webkit-perspective: 250px;<br>  /<em> preseve-3d指定元素的子元素在3d空间内定位 </em>/<br>  -webkit-transform-style: preserve-3d;<br>  /<em> 指定用户从哪个方向看过来的 </em>/<br>  -webkit-perspective-origin: -100% -50%;</p>
<hr>
<h4 id="3-7响应式设计基础"><a href="#3-7响应式设计基础" class="headerlink" title="3.7响应式设计基础"></a>3.7响应式设计基础</h4><p>响应式设计可以理解成”PC端和移动端共享一套代码”，其主要包含的内容有：</p>
<ol>
<li>使用流式布局或栅格布局以适应不同屏幕。</li>
<li>使用CSS3媒体查询技术对不同尺寸的屏幕进行样式微调。</li>
<li>使用流式图片</li>
</ol>
<p>基本概念：<br>CSS像素与设备像素<br>设备像素（device pixel）：屏幕上最小的发色单元。<br>CSS像素（CSS pixel）：定义的样式尺寸大小。</p>
<p>PPI与设备像素比<br>PPI：设备像素密度。<br>设备像素比（devicePixelRatio）：设备上物理像素和设备独立像素的比例。<br>设备像素比可用来判断设备是否是retina设备。</p>
<p>视口（viewport）<br>视口：表示浏览器窗口的可视区域。<br>移动设备浏览器定义了两个视口：</p>
<ol>
<li>布局视口：默认是980px，决定桌面版网站的CSS</li>
<li>可见视口：决定移动版网站的CSS</li>
</ol>
<p>meta的name属性为viewport时，content属性值可以为：</p>
<ul>
<li>width：布局视口宽度</li>
<li>height：布局视口高度</li>
<li>initial-scale：初始缩放比例（0~10.0）</li>
<li>minimum-scale：最小缩放比例</li>
<li>maximum-scale：最大缩放比例</li>
<li>user-scalable：用户是否可缩放，默认yes</li>
</ul>
<hr>
<h4 id="3-7-2-媒体查询（media-queries）"><a href="#3-7-2-媒体查询（media-queries）" class="headerlink" title="3.7.2 媒体查询（media queries）"></a>3.7.2 媒体查询（media queries）</h4><p>语法：<br>@media ：&lt;sMedia&gt; { sRules }<br>取值：<br>&lt;sMedia&gt;：指定设备名称。<br>{sRules}：样式表定义。</p>
<p>media_query: [only | not]? <media_type> [ and &lt;expression&gt; ]*</media_type></p>
<p>expression: ( &lt;media_feature&gt; [: &lt;value&gt;]? )</p>
<p>media_type: all | aural | braille | handheld | print | projection | screen | tty | tv | embossed</p>
<p>media_feature（”min-“或”max-“）: width | height | device-width | device-height | color | color-index |  resolution | orientation | scan | grid | device-aspect-ratio | monochrome</p>
<p>在JavaScript中，可使用matchMedia()检查媒体查询是否成功，即看其matches属性是true还是false。</p>
<hr>
<h4 id="3-7-3-响应式栅格系统"><a href="#3-7-3-响应式栅格系统" class="headerlink" title="3.7.3 响应式栅格系统"></a>3.7.3 响应式栅格系统</h4><p>HTML代码如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col1"</span>&gt;</span> nav<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col2"</span>&gt;</span> main <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col1"</span>&gt;</span> aside <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>CSS代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 普通屏幕使用 960的宽度 */</span></span><br><span class="line"><span class="selector-class">.row</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.row</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: left;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">display</span>: table; <span class="comment">/* 清除行中浮动 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[class^="col"]</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">75%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 屏幕设备宽度大于 1200px 时row宽度固定为 1170px */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">1200px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.row</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1170px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 对于平板电脑每行宽度为 724px */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">768px</span>) and (max-width: <span class="number">979px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.row</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">724px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 横屏的手机或者竖屏的平板 */</span></span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">767px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.row</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 竖屏的手机 */</span></span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">480px</span>) &#123;</span><br><span class="line">  <span class="comment">/* 这里是可能一些微调 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="3-7-4-移动优先理念"><a href="#3-7-4-移动优先理念" class="headerlink" title="3.7.4  移动优先理念"></a>3.7.4  移动优先理念</h4><p>对于一个新产品，先设计移动版，然后才是桌面版。<br>这样的好处是：</p>
<ol>
<li>产品功能会更简洁</li>
<li>移动设备可以用的功能电脑上同样可以用</li>
<li>能写出性能更好的程序</li>
<li>可加新功能，因为加功能比删功能更容易</li>
</ol>
<hr>
<h4 id="3-7-5-另一种思路：后端模块输出的优化"><a href="#3-7-5-另一种思路：后端模块输出的优化" class="headerlink" title="3.7.5 另一种思路：后端模块输出的优化"></a>3.7.5 另一种思路：后端模块输出的优化</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"common.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (!<span class="attr">is_mobile</span>()) &#123;%&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"desktop.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> &#125; <span class="attr">else</span> &#123; %&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"mobile.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">is_mobile</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> ua=navigator.userAgent.toLowerCase(); </span><br><span class="line">          <span class="keyword">if</span> (<span class="regexp">/iphone|ipad|ipod/</span>.test(ua))&#123;</span><br><span class="line">              reutrn <span class="literal">true</span>;</span><br><span class="line">          &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="regexp">/android/</span>.test(ua))&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">true</span>;      </span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              retur <span class="literal">false</span>;</span><br><span class="line">          &#125; </span><br><span class="line">        &#125;</span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main-content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (!<span class="attr">is_mobile</span>()) &#123;%&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"side"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="3-7-6-其他细节"><a href="#3-7-6-其他细节" class="headerlink" title="3.7.6 其他细节"></a>3.7.6 其他细节</h4><p>触摸和非触摸<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.className+=(<span class="string">'ontouchstart'</span> <span class="keyword">in</span> <span class="built_in">window</span>) ? <span class="string">'touch'</span> : <span class="string">'no-touch'</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> <span class="selector-class">.no-touch</span> <span class="selector-class">.item</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">cursor</span>:pointer;</span><br><span class="line">    <span class="attribute">background-color</span>:<span class="number">#ff9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>retina屏幕的图片使用<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon</span>&#123;</span><br><span class="line">    <span class="attribute">background-image</span>:<span class="built_in">url</span>(icon.png);</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> all and (max-width:<span class="number">320px</span>) and (-webkit-min-device-pixel-ratio:<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="selector-class">.icon</span>&#123;</span><br><span class="line">        <span class="attribute">background-size</span>:<span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="第四章-从网页到应用"><a href="#第四章-从网页到应用" class="headerlink" title="第四章 从网页到应用"></a>第四章 从网页到应用</h2><h3 id="4-2-本地存储升级"><a href="#4-2-本地存储升级" class="headerlink" title="4.2 本地存储升级"></a>4.2 本地存储升级</h3><h4 id="4-2-1-cookie"><a href="#4-2-1-cookie" class="headerlink" title="4.2.1 cookie"></a>4.2.1 cookie</h4><p>cookie是如何存储的？<br>用户浏览器第一次向服务器发生请求时，服务器会返回set-Cookie：xxx，浏览器会记下xxx，当浏览器再次请求服务器时会带上Cookie：xxx。<br>简单说，cookie会随着HTTP请求发送到服务器端。</p>
<p>cookie是如何设置的？<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie=<span class="string">"name=value"</span></span><br></pre></td></tr></table></figure></p>
<p>cookie的大小和数量限制？<br>IE6及以下 每个域最多20个<br>IE7及以上 每个域最多50个<br>Firefox 每个域最多50个<br>Google、Safari 没明确限制，但是cookie超过了HTTP头部大小的限制时，服务器将无法处理</p>
<p>cookie的大小限制在4096B</p>
<p>cookie不适合在本地存储数据，本地存储大量数据请使用Web Storage。</p>
<hr>
<h4 id="4-2-2-web-storage"><a href="#4-2-2-web-storage" class="headerlink" title="4.2.2 web storage"></a>4.2.2 web storage</h4><p>web storage不会随着HTTP请求发送到服务器端，使用它不会影响网站的性能。</p>
<p>浏览器不允许开发者实例化Storage对象，已经有两个实例化好的对象，分别是localStorage和sessionStorage。<br>localStorage会持久化数据，当关闭浏览器再打开网站，依然可以访问这个域的数据，而使用sessionStorage不能。</p>
<p>web storage使用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设值</span></span><br><span class="line">localStorage[<span class="string">'ww'</span>]=<span class="built_in">JSON</span>.stringify(&#123;name:<span class="string">"ww"</span>,age:<span class="number">22</span>&#125;);</span><br><span class="line">localStorage.setItem(<span class="string">'zl'</span>,<span class="built_in">JSON</span>.stringify(&#123;name:<span class="string">'zl'</span>,age:<span class="number">22</span>&#125;));</span><br><span class="line"><span class="comment">//获取</span></span><br><span class="line">localStorage.length;</span><br><span class="line">localStorage.key(<span class="string">'0'</span>);</span><br><span class="line"><span class="built_in">JSON</span>.parse(localStorage[<span class="string">'ww'</span>]);</span><br><span class="line"><span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'zl'</span>));</span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line"><span class="keyword">delete</span> localStorage[<span class="string">'ww'</span>];</span><br><span class="line">localStorage.removeItem(<span class="string">'zl'</span>);</span><br><span class="line">localStorage.clear();<span class="comment">//清除所有</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="4-3离线应用"><a href="#4-3离线应用" class="headerlink" title="4.3离线应用"></a>4.3离线应用</h3><h4 id="4-3-1-缓存和应用缓存"><a href="#4-3-1-缓存和应用缓存" class="headerlink" title="4.3.1 缓存和应用缓存"></a>4.3.1 缓存和应用缓存</h4><p>应用缓存就是将服务器的资源文件缓存至本地，有以下三大优点：</p>
<ul>
<li>加速应用启动速度</li>
<li>离线访问页面</li>
<li>节省服务器资源，减少请求</li>
</ul>
<hr>
<h4 id="4-3-2-应用缓存的基本用法"><a href="#4-3-2-应用缓存的基本用法" class="headerlink" title="4.3.2 应用缓存的基本用法"></a>4.3.2 应用缓存的基本用法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAppCacheStatus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> appCache = <span class="built_in">window</span>.applicationCache;</span><br><span class="line">  <span class="comment">// status 是一个整数，appCache上定义了一系列常量表示缓存的状态</span></span><br><span class="line">  <span class="keyword">switch</span> (appCache.status) &#123;</span><br><span class="line">    <span class="comment">// UNCACHED === 0，未缓存状态，表示应用缓存对象还没有初始化完成。</span></span><br><span class="line">    <span class="keyword">case</span> appCache.UNCACHED:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'UNCACHED'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// IDLE === 1，空闲状态，应用缓存此时未处于更新过程中。</span></span><br><span class="line">    <span class="keyword">case</span> appCache.IDLE:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'IDLE'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// CHECKING === 2，检查状态，清单已经获取完毕并检查更新。</span></span><br><span class="line">    <span class="keyword">case</span> appCache.CHECKING:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'CHECKING'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// DOWNLOADING === 3，下载资源并准备加入到缓存中，这是由于清单文件变化引起的。</span></span><br><span class="line">    <span class="keyword">case</span> appCache.DOWNLOADING:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'DOWNLOADING'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// UPDATEREADY === 4，更新就绪状态，一个新版本的应用缓存可以使用。</span></span><br><span class="line">    <span class="comment">// 该状态有一个对应的事件 updateready，当下载完毕一个更新，并且还未使用 swapCache() 方法激活更新时，该事件触发，而不会是 cached 事件。</span></span><br><span class="line">    <span class="keyword">case</span> appCache.UPDATEREADY:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'UPDATEREADY'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="comment">// OBSOLETE === 5，废弃状态，应用缓存现在被废弃。</span></span><br><span class="line">    <span class="keyword">case</span> appCache.OBSOLETE:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'OBSOLETE'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'UKNOWN CACHE STATUS'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span><br><span class="line"><span class="comment">// load 事件后再进行监听。</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.applicationCache.addEventListener(<span class="string">'updateready'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (getAppCacheStatus() === <span class="string">'UPDATEREADY'</span>) &#123;</span><br><span class="line">      <span class="comment">// 此时浏览器已经下载好了需要被缓存的文件</span></span><br><span class="line">      <span class="comment">// 调用swapCache()方法以填充</span></span><br><span class="line">      <span class="built_in">window</span>.applicationCache.swapCache();</span><br><span class="line">      <span class="comment">// 在重新加载页面之前，最好提示用户</span></span><br><span class="line">      <span class="keyword">if</span> (confirm(<span class="string">'本程序有更新，是否刷新？'</span>)) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 此时manifest文件无更新。</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="literal">false</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleCacheEvent</span><span class="params">(e)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleCacheError</span><span class="params">(e)</span> </span>&#123;</span><br><span class="line">  alert(<span class="string">'Error: Cache failed to update!'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// manifest第一次加载缓存时会触发</span></span><br><span class="line">appCache.addEventListener(<span class="string">'cached'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正在检查更新，这个事件永远是第一个触发的。</span></span><br><span class="line">appCache.addEventListener(<span class="string">'checking'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有更新，浏览器正在下载资源文件</span></span><br><span class="line">appCache.addEventListener(<span class="string">'downloading'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当这些情况出现时会触发error事件：</span></span><br><span class="line"><span class="comment">// 1. manifest文件返回404或者410状态时</span></span><br><span class="line"><span class="comment">// 2. 下载资源失败时</span></span><br><span class="line"><span class="comment">// 3. 正在下载资源文件时却发现manifest文件更新了时</span></span><br><span class="line">appCache.addEventListener(<span class="string">'error'</span>, handleCacheError, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一次下载manifest文件之后触发</span></span><br><span class="line">appCache.addEventListener(<span class="string">'noupdate'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// manifest文件返回404或者410状态，此时缓存将会被删除</span></span><br><span class="line">appCache.addEventListener(<span class="string">'obsolete'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每一个资源文件在获取时都会触发一次progress事件</span></span><br><span class="line">appCache.addEventListener(<span class="string">'progress'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最近一次manifest资源被重新下载时触发</span></span><br><span class="line">appCache.addEventListener(<span class="string">'updateready'</span>, handleCacheEvent, <span class="literal">false</span>);</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="第五章-指尖下的浏览器"><a href="#第五章-指尖下的浏览器" class="headerlink" title="第五章 指尖下的浏览器"></a>第五章 指尖下的浏览器</h2><p>touch事件：</p>
<ul>
<li>touchstart：开始触摸时</li>
<li>touchmove：触摸移动时</li>
<li>touchend ：触摸结束时</li>
</ul>
<p>触摸事件对象e包含的属性有：</p>
<ul>
<li>touches：所有屏幕上所有手指动作的列表，是一个TouchList类型的对象，对象里有多个Touch对象</li>
<li>targetTouches：当前DOM元素上所有手指动作列表</li>
<li>changedTouches：当前改变的手指动作列表</li>
</ul>
<p>每一根手指都会产生一个Touch对象，Touch对象包含的属性有：<br>identifier：一个数字，标识唯一<br>target：动作目标的DOM元素<br>clientX、clientY：触摸点相对于浏览器视口的位置<br>pageX、pageY：触摸点相对于页面的位置<br>screenX、screenY：触摸点相对于屏幕的位置</p>
<hr>
<h2 id="第六章-地理定位"><a href="#第六章-地理定位" class="headerlink" title="第六章 地理定位"></a>第六章 地理定位</h2><p>百度地图我的位置：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1.0, user-scalable=no"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line">  <span class="selector-tag">body</span>, <span class="selector-tag">html</span>,<span class="selector-id">#allmap</span> &#123;<span class="attribute">width</span>: <span class="number">280px</span>;<span class="attribute">height</span>: <span class="number">200px</span>;<span class="attribute">overflow</span>: hidden;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">font-family</span>:<span class="string">"微软雅黑"</span>;&#125;</span><br><span class="line">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://cdn.bootcss.com/jquery/2.1.4/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>添加动画标注点<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"allmap"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">  <span class="comment">//百度地图API功能</span></span><br><span class="line">  <span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">    script.src = <span class="string">"http://api.map.baidu.com/api?v=2.0&amp;ak=X5w1ZLsQvWwxRwNv5nonp4MX&amp;callback=init"</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"allmap"</span>);</span><br><span class="line">    <span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">104.083963</span>,<span class="number">30.623718</span>);</span><br><span class="line">    map.centerAndZoom(point,<span class="number">18</span>);</span><br><span class="line">    <span class="keyword">var</span> marker = <span class="keyword">new</span> BMap.Marker(point);<span class="comment">//创建标注</span></span><br><span class="line">    map.addOverlay(marker);<span class="comment">//将标注添加到地图中</span></span><br><span class="line">    map.addEventListener(<span class="string">"tilesloaded"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        $(<span class="string">".BMap_cpyCtrl"</span>).remove();</span><br><span class="line">      &#125;,<span class="number">500</span>);    </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="第七章-Web-Worker"><a href="#第七章-Web-Worker" class="headerlink" title="第七章 Web Worker"></a>第七章 Web Worker</h2><p>Web Worker技术是为了解决JavaScript因运行在浏览器单线程环境里，无法创建线程问题。<br>使用Web Worker：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myWorker=<span class="keyword">new</span> Worker(<span class="string">"xxx.js"</span>);</span><br></pre></td></tr></table></figure></p>
<p>在xxx.js里可以做一些耗时操作，通过messaage事件和postMessage方法进行通信。<br>xxxx.js里<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line">    num+=i;</span><br><span class="line">&#125;</span><br><span class="line">postMessage(num);</span><br></pre></td></tr></table></figure></p>
<p>调用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myWorker=<span class="keyword">new</span> Worker(<span class="string">"xxx.js"</span>);</span><br><span class="line">myWorker.addEventListener(<span class="string">'message'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.data);<span class="comment">//4950</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br></pre></td></tr></table></figure></p>
<p>Worker技术虽然给客户端进行大量提供了便利，但对于移动设备而言，过分依赖Worker并不是一个好主意。</p>
<hr>
<h2 id="第八章-通信基础"><a href="#第八章-通信基础" class="headerlink" title="第八章 通信基础"></a>第八章 通信基础</h2><p>XRH2：XML HttpRequest Level2，提供一种利用JavaScript与服务器端通信的方式。<br>Ajax基本步骤：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr=<span class="keyword">new</span> XmlHttpRequest();</span><br><span class="line">xhr.open(<span class="string">'GET'</span>,<span class="string">'/img.jpg'</span>,<span class="literal">true</span>);</span><br><span class="line">xhr.responseType=<span class="string">'blob'</span>;<span class="comment">//text,arraybuffer,json,document</span></span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.status == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> url=<span class="built_in">window</span>.URL.createObjectURL(<span class="keyword">this</span>.response);</span><br><span class="line">    <span class="keyword">var</span> img=<span class="keyword">new</span> Image();</span><br><span class="line">    img.src=url;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(img)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="第九章-实时Web技术"><a href="#第九章-实时Web技术" class="headerlink" title="第九章 实时Web技术"></a>第九章 实时Web技术</h2><p>使用Socket.IO实现在线实时聊天室<br>index.html：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">'style.css'</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Socket.IO Chat Demo<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span> <span class="attr">class</span>=<span class="string">"chatroom"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nickname"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"set-nickname"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"nick"</span>&gt;</span>输入昵称后进入聊天室<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"nick"</span> <span class="attr">name</span>=<span class="string">"nick"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"昵称"</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>进入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"nickname-err"</span>&gt;</span>该昵称已经有人使用<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"messages"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nicknames"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>当前在线: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lines"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"send-message"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"to"</span>&gt;</span> 发送给<span class="tag">&lt;<span class="name">b</span>&gt;</span>所有人<span class="tag">&lt;/<span class="name">b</span>&gt;</span>：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"message"</span> <span class="attr">type</span>=<span class="string">"text"</span>/ <span class="attr">placeholder</span>=<span class="string">"在这里输入消息发送"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>发送<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'http://code.jquery.com/jquery-latest.min.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'socket-io.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'index.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>style.css：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"Helvetica Neue"</span>, Helvetica, Arial, sans-serif;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(0, 0, 0, .8);</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wrap</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">900px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f3f3f3</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="built_in">rgba</span>(0, 0, 0, .07), inset <span class="number">0</span> <span class="number">1px</span> <span class="number">11px</span> <span class="built_in">rgb</span>(255, 255, 255);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 按钮和表单样式 */</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="text"]</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#777</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(0, 0, 0, .2);</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type="text"]</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#00b5d6</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#00a5c3</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">7px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(255, 255, 255, .6),</span><br><span class="line">              inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#008da7</span>;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">600</span> <span class="number">1.3em</span>/<span class="number">1.7em</span> <span class="string">"helvetica neue"</span>, helvetica, arial, sans-serif;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">#006679</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">:active</span>,</span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#009cb8</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="built_in">rgba</span>(255, 255, 255, .7),</span><br><span class="line">             inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#007287</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 布局样式  */</span></span><br><span class="line"><span class="selector-class">.nickname</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(0, 0, 0, .5);</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">label</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nickname</span> <span class="selector-class">.nickname-err</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#8b0000</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nickname</span> &#123;</span><br><span class="line">  <span class="comment">/*display: none;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.send-message</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-tag">em</span> &#123;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(0, 0, 0, .5);</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">13px</span> Helvetica, Arial;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-tag">p</span> <span class="selector-tag">b</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(0, 0, 0, .8);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child(even)</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fafafa</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-class">.nicknames</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-class">.nicknames</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-class">.nicknames</span> <span class="selector-tag">b</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#4FA72C</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="built_in">rgba</span>(0, 0, 0, .2);</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.messages</span> <span class="selector-class">.lines</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">  <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.send-message</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.send-message</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.send-message</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">110px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 由于我们的应用比较简单因此将只针对三种宽度的设备进行优化 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 较宽屏幕 */</span></span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">960px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.nicknames</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">160px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.nicknames</span> <span class="selector-tag">b</span>,</span><br><span class="line">  <span class="selector-class">.nicknames</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 横屏的手机或者平板 */</span></span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">959px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 竖屏的手机 */</span></span><br><span class="line">@<span class="keyword">media</span> (max-width: <span class="number">320px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.to</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.send-message</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.message</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">190px</span> <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>重点及核心代码<br>前端代码：<br>index.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 DOMReady 后再开始执行实际代码</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $chatroom = $(<span class="string">'.chat'</span>),</span><br><span class="line">    $lines = $(<span class="string">'.lines'</span>),</span><br><span class="line">    $nickname = $(<span class="string">'.nickname'</span>),</span><br><span class="line">    $setNickname = $(<span class="string">'.set-nickname'</span>),</span><br><span class="line">    $nicknames = $(<span class="string">'.nicknames'</span>),</span><br><span class="line">    $messages = $(<span class="string">'.messages'</span>),</span><br><span class="line">    $message = $(<span class="string">'.message'</span>),</span><br><span class="line">    $nick = $(<span class="string">'.nick'</span>),</span><br><span class="line">    $sendMessage = $(<span class="string">'.send-message'</span>),</span><br><span class="line">    $to = $(<span class="string">'.to'</span>),</span><br><span class="line">    $nicknameErr = $(<span class="string">'.nickname-err'</span>), toUser = <span class="literal">null</span>, myself = <span class="literal">null</span></span><br><span class="line">  <span class="comment">// 如果不传递url参数，Socket.IO会自动探测地址。</span></span><br><span class="line">  <span class="comment">// 通常是生成的类似 /socket.io/1/?t=1371223173600 这样的地址</span></span><br><span class="line">  <span class="keyword">var</span> socket = io.connect()</span><br><span class="line">  socket.on(<span class="string">'announcement'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    $lines.append($(<span class="string">'&lt;p&gt;'</span>).append($(<span class="string">'&lt;em&gt;'</span>).text(msg)))</span><br><span class="line">  &#125;)</span><br><span class="line">  socket.on(<span class="string">'nicknames'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">nicknames</span>) </span>&#123;</span><br><span class="line">    $nicknames.empty().append($(<span class="string">'&lt;span&gt;当前在线: &lt;/span&gt;'</span>))</span><br><span class="line">    $.each(nicknames, <span class="function"><span class="keyword">function</span> (<span class="params">key, val</span>) </span>&#123;</span><br><span class="line">      $nicknames.append($(<span class="string">'&lt;b&gt;'</span>).text(val))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">message</span>(<span class="params">from, msg, opt_to</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> label</span><br><span class="line">    <span class="keyword">if</span> (opt_to) &#123;</span><br><span class="line">      label = $(<span class="string">'&lt;b&gt;'</span>).text(<span class="keyword">from</span> + <span class="string">'对'</span> + opt_to + <span class="string">'说：'</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      label = $(<span class="string">'&lt;b&gt;'</span>).text(<span class="keyword">from</span> + <span class="string">'：'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    $lines.append($(<span class="string">'&lt;p&gt;'</span>).append(label, msg))</span><br><span class="line">  &#125;</span><br><span class="line">  socket.on(<span class="string">'user:pub'</span>, message)</span><br><span class="line">  socket.on(<span class="string">'user.private'</span>, message)</span><br><span class="line">  socket.on(<span class="string">'reconnect'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $lines.remove()</span><br><span class="line">    message(<span class="string">'&lt;i&gt;系统消息&lt;/i&gt;'</span>, <span class="string">'重连了！'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  socket.on(<span class="string">'reconnecting'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    message(<span class="string">'&lt;i&gt;系统消息&lt;/i&gt;'</span>, <span class="string">'尝试重连中…'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  socket.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    message(<span class="string">'&lt;i&gt;系统消息&lt;/i&gt;'</span>, e ? e : <span class="string">'未知错误！'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">clear</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $message.val(<span class="string">''</span>).focus()</span><br><span class="line">  &#125;</span><br><span class="line">  $setNickname.submit(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    socket.emit(<span class="string">'nickname'</span>, $nick.val(), <span class="function"><span class="keyword">function</span>(<span class="params">set</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!set) &#123;</span><br><span class="line">        clear()</span><br><span class="line">        myself = $nick.val()</span><br><span class="line">        $nickname.hide()</span><br><span class="line">        $messages.show()</span><br><span class="line">        $sendMessage.show()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      $nicknameErr.css(<span class="string">'visibility'</span>, <span class="string">'visible'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  $sendMessage.submit(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (toUser) &#123;</span><br><span class="line">      message(<span class="string">'我对'</span> + toUser + <span class="string">'说'</span>, $message.val())</span><br><span class="line">      socket.emit(<span class="string">'user:private'</span>, $message.val(), toUser)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      message(<span class="string">'我'</span>, $message.val())</span><br><span class="line">      socket.emit(<span class="string">'user:pub'</span>, $message.val())</span><br><span class="line">    &#125;</span><br><span class="line">    clear()</span><br><span class="line">    $lines.scrollTop(<span class="number">10000000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  $nicknames.on(<span class="string">'click'</span>, <span class="string">'b'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    toUser = $(e.target).text()</span><br><span class="line">    <span class="keyword">if</span> (toUser === myself) &#123;</span><br><span class="line">      $to.find(<span class="string">'b'</span>).text(<span class="string">'所有人'</span>)</span><br><span class="line">      toUser = <span class="literal">null</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    $to.find(<span class="string">'b'</span>).text(toUser)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>后端js代码：<br>server.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">// 使用connect中间层来处理静态文件请求</span></span><br><span class="line"><span class="comment">// 详情参考：https://github.com/senchalabs/connect</span></span><br><span class="line"><span class="keyword">var</span> connect = <span class="built_in">require</span>(<span class="string">'connect'</span>)</span><br><span class="line"><span class="keyword">var</span> app = connect.createServer(</span><br><span class="line">  <span class="comment">// 挂载当前文件所在目录</span></span><br><span class="line">  connect.static(__dirname)</span><br><span class="line">).listen(<span class="number">8080</span>)</span><br><span class="line"><span class="keyword">var</span> sio = <span class="built_in">require</span>(<span class="string">'socket.io'</span>)</span><br><span class="line"><span class="keyword">var</span> io = sio.listen(app),</span><br><span class="line">  <span class="comment">// 我们的程序没有引入后端存储层，因此在程序运行期间直接将所有用户保存在内存里面</span></span><br><span class="line">  nicknames = &#123;&#125;, onlines = &#123;&#125;</span><br><span class="line">io.sockets.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">socket</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 在设计事件时，用冒号分割以分组事件类型是一种易读的好做法</span></span><br><span class="line">  socket.on(<span class="string">'user:pub'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    socket.broadcast.emit(<span class="string">'user:pub'</span>, socket.nickname, msg)</span><br><span class="line">  &#125;)</span><br><span class="line">  socket.on(<span class="string">'user:private'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg, to</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(onlines[to]) &#123;</span><br><span class="line">      onlines[to].emit(<span class="string">'user.private'</span>, socket.nickname, msg, to)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  socket.on(<span class="string">'nickname'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">nick, fn</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// fn用于确认是否登录聊天室成功了，true表示有相同昵称的用户已经进入</span></span><br><span class="line">    <span class="keyword">if</span> (nicknames[nick]) &#123;</span><br><span class="line">      fn(<span class="literal">true</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fn(<span class="literal">false</span>)</span><br><span class="line">      nicknames[nick] = socket.nickname = nick</span><br><span class="line">      onlines[nick] = socket</span><br><span class="line">      socket.broadcast.emit(<span class="string">'announcement'</span>, nick + <span class="string">' 已连接'</span>)</span><br><span class="line">      io.sockets.emit(<span class="string">'nicknames'</span>, nicknames)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  socket.on(<span class="string">'disconnect'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!socket.nickname) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> nicknames[socket.nickname];</span><br><span class="line">    <span class="keyword">delete</span> onlines[socket.nickname]</span><br><span class="line">    <span class="comment">// 广播“我”已经离开聊天室了，并更新在线列表</span></span><br><span class="line">    socket.broadcast.emit(<span class="string">'announcement'</span>, socket.nickname + <span class="string">' 断开连接了'</span>)</span><br><span class="line">    socket.broadcast.emit(<span class="string">'nicknames'</span>, nicknames)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="第十章-感官世界"><a href="#第十章-感官世界" class="headerlink" title="第十章 感官世界"></a>第十章 感官世界</h2><p>感知方向和动作：<br>deviceorientation事件：在设备有明显的方向变化时触发<br>alpha：右手坐标系y变的夹角度数<br>beta：右手坐标系x变的夹角度数<br>gamma：右手坐标系z变的夹角度数</p>
<p>orientationchange事件：检测设备横竖屏幕</p>
<p>devicemotion事件：在设备进行自由落体时触发，很少用</p>
<p>compassneedscalibration事件：在需要校准设备时触发，很少用</p>
<p>随着手机的旋转、倾斜，浏览器里面的图片也跟着旋转、倾斜：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span><br><span class="line">  <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="comment">/* 不要忘了给容器加上透视深度 */</span></span><br><span class="line">    <span class="attribute">-webkit-perspective</span>: <span class="number">250px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;padding-top:50px;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../iphone.png"</span> <span class="attr">id</span>=<span class="string">"iphone"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span><br><span class="line">  <span class="keyword">var</span> iphone = <span class="built_in">document</span>.getElementById(<span class="string">'iphone'</span>)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'deviceorientation'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 如果你左右倾斜手机，屏幕上的手机也会左右摇（e.gamma），如果前后倾斜，屏幕上的手机则会相对屏幕前后转动（-e.beta）</span></span><br><span class="line">    iphone.style.webkitTransform = <span class="string">"rotate("</span> + e.gamma + <span class="string">"deg) rotate3d(1,0,0, "</span> + (e.beta * <span class="number">-1</span>) + <span class="string">"deg)"</span></span><br><span class="line">  &#125;, <span class="literal">true</span>)</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>判断是横屏还是竖屏：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'orientationchange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> displayStr = <span class="string">"Orientation : "</span></span><br><span class="line">  <span class="keyword">switch</span> (<span class="built_in">window</span>.orientation) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">      <span class="comment">// 竖屏</span></span><br><span class="line">      displayStr += <span class="string">"Portrait"</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">-90</span>:</span><br><span class="line">      <span class="comment">// 向右横屏</span></span><br><span class="line">      displayStr += <span class="string">"Landscape (right, screen turned clockwise)"</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">90</span>:</span><br><span class="line">      <span class="comment">// 向左横屏</span></span><br><span class="line">      displayStr += <span class="string">"Landscape (left, screen turned counterclockwise)"</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">180</span>:</span><br><span class="line">      <span class="comment">// 竖屏（倒着）</span></span><br><span class="line">      displayStr += <span class="string">"Portrait (upside-down portrait)"</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(displayStr)</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p>音视频捕获：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator.getUserMedia(type,successCallback,errorCallback)<span class="comment">//获取音频和视频</span></span><br></pre></td></tr></table></figure></p>
<p>获取媒体流实现截屏：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;video&gt;<span class="xml"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span></span><br><span class="line">&lt;img&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">canvas</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> video = <span class="built_in">document</span>.querySelector(<span class="string">'video'</span>)</span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.querySelector(<span class="string">'canvas'</span>)</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line"><span class="keyword">var</span> localMediaStream = <span class="literal">null</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">snapshot</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (localMediaStream) &#123;</span><br><span class="line">    <span class="comment">// drawImage方法可以直接绘制video的当前帧</span></span><br><span class="line">    ctx.drawImage(video, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="comment">// 将canvas当前绘制的内容转换成DataURL</span></span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">'img'</span>).src = canvas.toDataURL(<span class="string">'image/webp'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 点击拍照</span></span><br><span class="line">video.addEventListener(<span class="string">'click'</span>, snapshot, <span class="literal">false</span>)</span><br><span class="line">navigator.webkitGetUserMedia(&#123;video:<span class="literal">true</span>,audio:<span class="literal">true</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">stream</span>) </span>&#123;</span><br><span class="line">  video.src = <span class="built_in">window</span>.URL.createObjectURL(stream)</span><br><span class="line">  localMediaStream = stream</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="第十一章-history与导航"><a href="#第十一章-history与导航" class="headerlink" title="第十一章 history与导航"></a>第十一章 history与导航</h2><p>使用history.js实现页面无刷新更改URL的需求：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;plugins/native.history.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">(function(window,undefined)&#123;</span><br><span class="line">    // History对象是history.js提供的唯一对象，它拥有和window.history 几乎一样的API</span><br><span class="line">    History.Adapter.bind(window,&apos;statechange&apos;,function()&#123; </span><br><span class="line">        var state = History.getState()</span><br><span class="line">        console.log(state)</span><br><span class="line">    &#125;)</span><br><span class="line">    History.pushState(&#123;state:1&#125;, &apos;title 1&apos;, &apos;?state=1&apos;) // log: &#123;state:1&#125;, &apos;title 1&apos;, &apos;?state=1&apos;</span><br><span class="line">    History.pushState(&#123;state:2&#125;, &apos;title 2&apos;, &apos;?state=2&apos;) // log: &#123;state:2&#125;, &apos;title 2&apos;, &apos;?state=2&apos;</span><br><span class="line">    History.replaceState(&#123;state:3&#125;, &apos;title 3&apos;, &apos;?state=3&apos;) // log: &#123;state:3&#125;, &apos;title 3&apos;, &apos;?state=3&apos;</span><br><span class="line">    History.pushState(null, null, &apos;?state=4&apos;) // log: &#123;&#125;, &apos;&apos;, &apos;?state=4&apos;</span><br><span class="line">    History.back() // log: &#123;state:3&#125;, &apos;title 3&apos;, &apos;?state=3&apos;</span><br><span class="line">    History.back() // log: &#123;state:1&#125;, &apos;title 1&apos;, &apos;?state=1&apos;</span><br><span class="line">    History.back() // log: &#123;&#125;, &apos;Home Page&apos;, &apos;?&apos;</span><br><span class="line">    History.go(2) // log: &#123;state:3&#125;, &apos;title 3&apos;, &apos;?state=3&apos;</span><br><span class="line">&#125;)(window)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>到目前为止，关于HTML5相关的基础已经介绍的差不多了，对自己而言，那些东西可能只是基础中的基础，了解下原理和语法就行了。<br>HTML5现在感觉还在处于发展期，很多规范和接口还没有完全统一，真正想在HTML5有所作为，肯定离不开框架的使用，而且如果你只想用HTML5一手遮天的做项目那是绝对不可能的，根据需求而定是很重要的选择哦。</p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2015/11/25/Cordova简介/" style="float: left;">
        ← Cordova简介
    </a>
    
    
    <a class="pull-right" href="/2015/11/11/双11，难忘的一天/">
        双11，难忘的一天 →
    </a>
    
</nav>

        <div class="duoshuo">
<div class="ds-thread" data-thread-key="2015/11/18/阅读之HTML5移动Web开发实战详解/" data-title="阅读之HTML5移动Web开发实战详解" data-url="http://vmartaw.com/2015/11/18/阅读之HTML5移动Web开发实战详解/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"vmartaw"};
(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	 || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p><span id="busuanzi_container_site_pv" style='display:none'>您是本站第<span id="busuanzi_value_site_pv"></span>位访问者</span></p>
                <p>
                    &copy; 2012<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By 吴伟. All Rights Reserved.
                </p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
