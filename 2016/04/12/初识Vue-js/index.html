<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>初识Vue.js | WUWEI&#39;S BLOG</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="WUWEI">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="generator" content="WUWEI'S BLOG">
    <meta name="author" content="WUWEI">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="http://7xljcv.com1.z0.glb.clouddn.com/img/favicon.ico" type="image/ico">
    <link rel="apple-touch-icon" href="http://7xljcv.com1.z0.glb.clouddn.com/img/favicon3.png"/>
    <link rel="alternate" href="/atom.xml" title="WUWEI&#39;S BLOG" type="application/atom+xml">
    <link rel="stylesheet" href="http://7xljcv.com1.z0.glb.clouddn.com/css/ally.css" media="screen" type="text/css">
	
    <link rel="stylesheet" href="http://7xljcv.com1.z0.glb.clouddn.com/highlightjs/vs.css" type="text/css">
    
    

    <!-- Custom stylesheet, (add custom styles here, always load last) -->
    <!-- Load our stylesheet for IE8 -->
    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="http://7xljcv.com1.z0.glb.clouddn.com/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="http://7xljcv.com1.z0.glb.clouddn.com/js/jquery-1.11.2.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.2.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="http://7xljcv.com1.z0.glb.clouddn.com/js/html5shiv.min.js"></script>
    <script src="http://7xljcv.com1.z0.glb.clouddn.com/js/respond.min.js"></script>
    <![endif]-->

    <!-- baidu_tongji -->
    

    <script type="text/javascript">
    //iOS Web APP
    if(("standalone" in window.navigator) && window.navigator.standalone){
      var noddy, remotes = false;
      document.addEventListener('click', function(event) {
        noddy = event.target;
        while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
          noddy = noddy.parentNode;
        }
        if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes)){
          event.preventDefault();
          document.location.href = noddy.href;
        }
      },false);
    }
    </script>
</script>





  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  
  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="http://7xljcv.com1.z0.glb.clouddn.com/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            
        	<li>
        		<a class="sb-toggle-submenu">TYPES<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/App/" class="animsition-link">App<small>(6)</small></a></li>
				    
				    <li><a href="/categories/Browser/" class="animsition-link">Browser<small>(1)</small></a></li>
				    
				    <li><a href="/categories/CSS/" class="animsition-link">CSS<small>(2)</small></a></li>
				    
				    <li><a href="/categories/Cordova/" class="animsition-link">Cordova<small>(5)</small></a></li>
				    
				    <li><a href="/categories/HTML/" class="animsition-link">HTML<small>(3)</small></a></li>
				    
				    <li><a href="/categories/Hexo/" class="animsition-link">Hexo<small>(1)</small></a></li>
				    
				    <li><a href="/categories/JavaScript/" class="animsition-link">JavaScript<small>(5)</small></a></li>
				    
				    <li><a href="/categories/Life/" class="animsition-link">Life<small>(10)</small></a></li>
				    
				    <li><a href="/categories/MVVM/" class="animsition-link">MVVM<small>(4)</small></a></li>
				    
				    <li><a href="/categories/Markdown/" class="animsition-link">Markdown<small>(1)</small></a></li>
				    
				    <li><a href="/categories/Tools/" class="animsition-link">Tools<small>(2)</small></a></li>
				    
				    <li><a href="/categories/架构/" class="animsition-link">架构<small>(2)</small></a></li>
				    
				    <li><a href="/categories/驾考/" class="animsition-link">驾考<small>(1)</small></a></li>
				    
				</ul>
        	</li>
			
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://yanyaner.com/" class="animsition-link">yanyaner</a></li>
                    
                    <li><a href="http://bakbio.cn/" class="animsition-link">zhangli</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="http://7xljcv.com1.z0.glb.clouddn.com/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">WUWEI'S BLOG</a></li>
                            <li class="nolink"><span>Never </span>Give up.</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

        <!-- ============================ Hero Image =========================== -->

        <section id="hero" class="scrollme">
            <div class="container-fluid element-img" style="background: url(http://7xljcv.com1.z0.glb.clouddn.com/2016/04/23/1.jpg) no-repeat center center fixed;background-size: cover">
                <div class="row">
                    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2 vertical-align cover boost text-center">
                        <div class="center-me animateme" data-when="exit" data-from="0" data-to="0.6" data-opacity="0" data-translatey="100">
                            <div>
                            	
                                <h2>STAY <span>HUNGRY</span> , STAY <span>FOOLISH</span>.</h2>
                                <p></p>
				    			
                                <h2></h2>
                                <p>求知若饥，虚心若愚。</p>
				    			

                            </div>
                        </div>
                    </div>
                    <!-- // .col-md-12 -->
                </div>
                <div class="herofade beige-dk"></div>
            </div>
        </section>

        <!-- Height spacing helper -->
        <div class="heightblock"></div>
        <!-- // End height spacing helper -->

        <!-- ============================ END Hero Image =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2016-04-12T13:23:56.000Z" itemprop="datePublished">
          2016-04-12
      </time>
    
    
    | 
    <a href='/tags/MVVM/'>MVVM</a>,
    
    <a href='/tags/Vue/'>Vue</a>
    
    
</span>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <span id="busuanzi_container_page_pv">浏览:<span id="busuanzi_value_page_pv"></span></span>
                <h1>初识Vue.js</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h3 id="1-传统前端架构"><a href="#1-传统前端架构" class="headerlink" title="1.传统前端架构"></a>1.传统前端架构</h3><p>如果按照以前传统前端的方式去架构的话，随着前端业务逻辑的增多，开发和维护会变得越来越困难，请看：<br>这是我去年做的华为项目Telkomsel Moovigo的目录，主要业务逻辑的代码有65个之多（每个包含page、fss、js），虽然页面、样式、逻辑代码确实是分开的，但是都是合在同一个文件里面。<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/src.png" alt="src" title="src"></p>
<p>去年做的另一个华为项目Digicel也是同样：<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/src2.png" alt="src" title="src"></p>
<p>做这些项目的团队，就我们前端人员每个团队都有10人左右，维护相对简单，一人搞定6~7个就OK，那么问题来了，假如1人来搞定所有呢？因为是外包，所以这样做没太大问题，只要控制了成本，在时间少的情况下做出来且赚钱就行。有些创业公司是自主研发做产品的，如果还是这样做，会出现什么问题呢？<br>请看，这是我现在负责重构的微信端产品代码目录：<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/src3.png" alt="src" title="src"><br>卧槽，这么简单，这么清爽，完全没问题呀？<br>这样分的好处确实有，html文件夹里面就是界面，css文件夹里面就是样式，js文件夹里面就是业务逻辑，“结构”看起来特别清晰。<br>但是当你打开后，近100个html、js、css文件都在各自的同一个文件夹里面，请看：<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/src4.png" alt="src" title="src"><br>这样写最主要的两个问题是：</p>
<ol>
<li>难复用</li>
<li>难维护</li>
</ol>
<p>可能有些人不理解难复用的意思，复用怎么困难了？不是有现成的代码吗，复制粘贴重新创建一个改一改不就行了吗？这就是复用了呀！非也。<br><strong>复用</strong>的意思是<strong>在不改变现有代码的基础上，依赖以前写好的代码，进行二次开发</strong>。在程序的世界，有句话一直很经典：“不要重复造轮子”。举个例，如果将每个页面看成是一辆汽车，一辆汽车由轮胎，中控，发动机等构成，且可以自由组装。同理，前端页面可以抽成很多组件，每个页面都是由这些组件组装而成。</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/components.png" alt="components" title="components"></p>
<p><strong>维护</strong>的意思是<strong>需要在已上线的产品上新增业务；或者去改动有相同业务的页面</strong>。不管是修改页面上的图片、样式、位置、业务、Bug、性能都算维护。如果重复造轮子的页面越来越多，维护改动的地方就越多，到最后会越来越麻烦，改动一处，动则n处。为了解决这些问题，最好的方式就是实现组件化.</p>
<hr>
<h3 id="2-什么是MVVM框架？"><a href="#2-什么是MVVM框架？" class="headerlink" title="2.什么是MVVM框架？"></a>2.什么是MVVM框架？</h3><p>从三层架构说起，一个完整应用可以分成持久层、业务层、表现层三部分。<br>持久层即根据业务实现表及其映射关系，完善数据的CRUD功能；<br>业务层即根据业务实现对应的接口，调用持久层的东西为每个页面需要掉什么接口，返回什么数据进行封装；<br>表现层即根据业务实现相应的交互页面，调用业务层的东西实现数据的展现及CRUD。</p>
<p>三层架构各自其责，其实最痛苦的莫过于表现层。因为持久层和业务层的<strong>最终实现在表现层</strong>。<br>表现层是最重要的环节，做前端就是做交互，因为<strong>产品好坏的决定因素是用户的交互体验，当然其他两层也同样重要，因为表现层依赖于它们</strong>。<br>表现层说简单点就是做页面，三个字说起来容易，实际却不易，因为做一个页面，要做它的交互、数据展现、性能优化，还要理解页面与页面之间的关系等。页面多了，重复做这些事情就很麻烦。</p>
<p>为了更好的说明表现层，于是乎表现层出现了<strong>MVC架构,MVC是三个单词的首字母缩写，它们是Model（模型）、View（视图）和Controller（控制）</strong>。<br>刚入行web前端的人员可能是这样理解的，HTML就是Model，CSS就是View，JS就是Controller。<br>因为他们想的：<br>模型层就是指结构，HTML语义化就是在说结构呢；<br>视图层就是指展现效果，CSS样式就是给HTML标签实现效果呢，<br>控制层就是指操作，JS就是操作HTML、CSS、调用接口。<br>如果这样理解就大错特错啦，这里有通过 JavaScript实现的一个基础MVC模型，请注意的是：<strong>MVC 不是一种技术，仅是一种理念</strong>。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 模拟Model,View,Controller */</span></span><br><span class="line"><span class="keyword">var</span> M = &#123;&#125;, V = &#123;&#125;, C = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Model 负责存放数据 */</span></span><br><span class="line">M.data = <span class="string">"hello world"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** View 负责将数据呈现到屏幕上 */</span></span><br><span class="line">V.render = <span class="function"><span class="keyword">function</span> (<span class="params">M</span>) </span>&#123; alert(M.data); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Controller 作为一个 M 和 V 的桥梁 */</span></span><br><span class="line">C.handleOnload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; V.render(M); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 在网页读取的时候呼叫Controller */</span></span><br><span class="line"><span class="built_in">window</span>.onload = C.handleOnload;</span><br></pre></td></tr></table></figure></p>
<hr>
<p>又说多了，现在来讲什么是MVVM？<br>但是要讲清楚它之前，就必须讲MVC，因为根据它衍生出了MVP（这里不做讲解）和MVVM架构。<br>所以<strong>MVVM是MVC的衍生物，也是一种架构</strong>。</p>
<p>那么，MVC、MVVM两者的区别是什么呢？<br>依据一个简单的实例来讲解：</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/demo2.png" alt="noData" title="noData"></p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/demo.png" alt="data" title="data"></p>
<p>实现这个页面，一般思路是：<br><strong>1.掉接口获取数据 2.在回调里使用获取的值渲染页面 3.添加事件</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> PageView=&#123;</span><br><span class="line">        initialize:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> $<span class="keyword">this</span>=<span class="keyword">this</span>;</span><br><span class="line">            $<span class="keyword">this</span>.el=$(<span class="string">'#main'</span>);</span><br><span class="line">            $<span class="keyword">this</span>.fetch(<span class="function"><span class="keyword">function</span>(<span class="params">record</span>)</span>&#123; <span class="comment">//1.</span></span><br><span class="line">              $<span class="keyword">this</span>.render(record); <span class="comment">//2.</span></span><br><span class="line">              $<span class="keyword">this</span>.addEvent(); <span class="comment">//3.</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">PageView.initialize();</span><br></pre></td></tr></table></figure>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/demo3.png" alt="code" title="code"></p>
<p>在该代码中，模型（Model）就是从接口返回的record；视图（View）就是将获取的record设值到页面的render方法；控制（Controller）就是根据业务调取接口去获取数据的fetch方法。<br>执行的顺序是Model -&gt; View -&gt; Controller。</p>
<hr>
<p>再举个稍复杂点例子，如图：<br>1.进入发起页面<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/2demo.png" alt="demo" title="demo"></p>
<hr>
<p>2.添加数据<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/2demo2.png" alt="demo" title="demo"></p>
<hr>
<p>3.跳转成功发布的页面<br><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/2demo3.png" alt="demo" title="demo"></p>
<p>当用户打开发起页面添加数据，点提交跳转到成功发布的页面，这一过程的顺序就是View -&gt; Controller -&gt; Model -&gt;  View。用户看到发起的页面是View，点提交这一步骤是Controller、提交完成数据保存到数据库是Model，从发起页面跳转到成功发布的页面是View。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">submit: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $<span class="keyword">this</span> = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (basis.pub.isDisable(el)) <span class="keyword">return</span>;</span><br><span class="line">    basis.pub.disable(el); <span class="comment">//禁用</span></span><br><span class="line">    basis.pub.clear();</span><br><span class="line">    basis.wait.show();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> postData = &#123;</span><br><span class="line">      createKey: config.data.createKey,</span><br><span class="line">      openID: config.params.openID,</span><br><span class="line">      title: $(<span class="string">'.q-title'</span>, $<span class="keyword">this</span>.el).val(), <span class="comment">//e</span></span><br><span class="line">      desc: $(<span class="string">'.q-desc'</span>, $<span class="keyword">this</span>.el).val(), <span class="comment">//e</span></span><br><span class="line">      endType: $(<span class="string">'.endType'</span>, $<span class="keyword">this</span>.el).val(), <span class="comment">//e</span></span><br><span class="line">      picTemplateID: $(<span class="string">'.picTemplateID'</span>, $<span class="keyword">this</span>.el).val(), <span class="comment">//e</span></span><br><span class="line">      isOpenAnswer: $(<span class="string">'.isOpenAnswer'</span>, $<span class="keyword">this</span>.el).val(), <span class="comment">//e</span></span><br><span class="line">      itemimg: [],</span><br><span class="line">      itemUrlDesc: [],</span><br><span class="line">      questionID:config.params.questionID,</span><br><span class="line">      isCopy:config.params.copy</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    $(<span class="string">'.q-img-options .has-img'</span>, $<span class="keyword">this</span>.el).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> tag = $(<span class="keyword">this</span>),</span><br><span class="line">        next = tag.next(<span class="string">'.img-item-desc'</span>);</span><br><span class="line">      postData.itemimg.push(tag.children(<span class="string">'.itemimg'</span>).val()); <span class="comment">//e</span></span><br><span class="line">      <span class="keyword">if</span> (next.length) &#123;</span><br><span class="line">        postData.itemUrlDesc.push(next.children(<span class="string">'.itemUrlDesc'</span>).val().replace(<span class="regexp">/,/ig</span>, <span class="string">'，'</span>));<span class="comment">//e</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    postData.itemimg = postData.itemimg.join(<span class="string">','</span>); <span class="comment">//e</span></span><br><span class="line">    postData.itemUrlDesc = postData.itemUrlDesc.join(<span class="string">','</span>); <span class="comment">//e</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的问题在于：<br>1.用户点击发布时，提交表单前需要挨个获取DOM的val值（标注e的），这样写的坏处就是<strong>重复去获取不同DOM，重复去设值</strong>。<br>2.当用户提交后跳转到成功发布的页面，这样写的坏处就是<strong>跳转后需要重新加载该页面的所有资源（html、css、js、图片等），还需要调很多接口获取数据，等数据获取后又要重复去获取DOM，然后根据业务改变其样式，展示出最终的页面效果</strong>。</p>
<hr>
<p>MVC流程图：</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/mvc.png" alt="mvc" title="mvc"></p>
<blockquote>
<p>MVC特点：所有通信都是单向的</p>
</blockquote>
<hr>
<p>同样的页面用MVVM来实现，该是怎样的呢？从简单的实例入手，这里我使用了Vue.js，代码如下：<br>HTML代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"top box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left box-flex-1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"vote_create_count"</span>&gt;</span>&#123;&#123; user.vote_create_count &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>累计发起<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right box-flex-1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"can_vote_count"</span>&gt;</span> &#123;&#123; user.can_vote_count &#125;&#125;　<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>今日可发<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mid-name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">"nikename"</span>&gt;</span>&#123;&#123; user.nikename &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-head"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"head-image"</span> <span class="attr">style</span>=<span class="string">'background:url( &#123;&#123; user.headimage &#125;&#125; ) no-repeat;background-size:100%'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>JavaScript代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el:<span class="string">'#main'</span>,</span><br><span class="line">    data:&#123;</span><br><span class="line">        user: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self=<span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">this</span>.fetch(<span class="function"><span class="keyword">function</span>(<span class="params">record</span>)</span>&#123;</span><br><span class="line">            self.user=record;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        fetch:<span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">            ...</span><br><span class="line">            basis.req.ajax(ops);</span><br><span class="line">        &#125;,</span><br><span class="line">        addEvent:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在该代码中，模型（Model）就是vm实例对象的data里的值，如：user；视图（View）就是上面整个Html代码，如：；ViewModel就是vm实例对象，它建立了模型和视图的桥梁。</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/2demo5.png" alt="demo" title="demo"></p>
<p>通过ViewModel能实现View和Model的实时更新，这样写的好处在于：<br><strong>1.解决不需要重复去获取DOM、重复去操作DOM等事情，关注点能重点放在业务及页面组成上</strong><br><strong>2.方便组件化即复用</strong><br><strong>3.接口返回的数据是什么，前端马上展示什么,你变我也变</strong></p>
<hr>
<p>MVVM流程图：</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/12/mvvm.png" alt="mvp" title="mvvm"></p>
<blockquote>
<p>MVVM特点：实现数据和视图的双向绑定</p>
</blockquote>
<hr>
<h3 id="3-Vue-js的简单介绍"><a href="#3-Vue-js的简单介绍" class="headerlink" title="3.Vue.js的简单介绍"></a>3.Vue.js的简单介绍</h3><p>Vue.js的作者为<strong><a href="https://github.com/yyx990803" target="_blank" rel="external">Evan You</a></strong>，任职于Google Creative Lab，虽然Vue是一个个人项目，但在发展前景上个人认为绝不输于Google的AngularJs，不要小看一个个人项目，比如一个人创建了backbone.js、underscore.js、coffeescript的前端大神<strong><a href="https://github.com/jashkenas" target="_blank" rel="external">Jeremy Ashkenas</a></strong>，我们在使用其框架的时候还不是风生水起。</p>
<p>引用Vue的官网（<strong><a href="http://cn.vuejs.org/" target="_blank" rel="external">http://cn.vuejs.org/</a></strong>）所介绍的那样，其主要特点有两个：</p>
<blockquote>
<p>Vue.js的目标是通过尽可能简单的API实现响应的数据绑定和组合的视图组件。</p>
</blockquote>
<h4 id="1-响应的数据绑定"><a href="#1-响应的数据绑定" class="headerlink" title="1.响应的数据绑定"></a>1.响应的数据绑定</h4><p>Vue.js的核心是一个响应的数据绑定系统，它让数据与DOM保持同步非常简单。<br>在使用jQuery/Zepto.js手工操作DOM时，我们的代码常常是命令式的、重复的与易错的。<br>Vue.js拥抱数据驱动的视图概念。<br>通俗地讲，它意味着我们在普通的HTML模板中使用特殊的语法将DOM“绑定”到底层数据。一旦创建了绑定，DOM将与数据保持同步。每当修改了数据，DOM便相应地更新。这样我们应用中的逻辑就都是直接修改数据，不必与DOM更新搅在一起。这让我们的代码更容易撰写、理解与维护。</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/mvvm.png" alt="mvvm" title="mvvm"></p>
<p>实例1：<br>html代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这是我们的 View --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example-1"</span>&gt;</span></span><br><span class="line">  Hello &#123;&#123; name &#125;&#125;!</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>js代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是我们的 Model</span></span><br><span class="line"><span class="keyword">var</span> exampleData = &#123;</span><br><span class="line">  name: <span class="string">'Vue.js'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个 Vue 实例或 "ViewModel"</span></span><br><span class="line"><span class="comment">// 它连接 View 与 Model</span></span><br><span class="line"><span class="keyword">var</span> exampleVM = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example-1'</span>,</span><br><span class="line">  data: exampleData</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>效果：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Hello</span> <span class="selector-tag">Vue</span><span class="selector-class">.js</span>！</span><br></pre></td></tr></table></figure></p>
<p>看起来这跟单单渲染一个模板非常类似，但是Vue.js在背后做了大量工作。并且DOM会自动响应数据的变化。我们如何知道？打开你的浏览器的控制台，修改exampleData.name，你将看到上例相应地更新。</p>
<p>总结一下就是使用Vue.js我们<strong>不需要撰写任何DOM操作代码</strong>：被绑定增强的HTML模板是底层数据状态的声明式的映射，数据不过是存在了普通的JavaScript对象里。我们的视图完全由数据驱动。</p>
<p>实例2：<br>html代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"example-2"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"greeting"</span>&gt;</span>Hello!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>js代码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> exampleVM2 = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#example-2'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    greeting: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>效果：<br><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello!</span><br></pre></td></tr></table></figure></p>
<p>这里我们遇到新东西。你看到的 v-if 特性被称为<strong>指令</strong>。指令带有前缀 v-，以指示它们是 Vue.js 提供的特殊特性。并且如你所想象的，它们会对绑定的目标元素添加响应式的特殊行为。继续在控制台设置 exampleVM2.greeting 为 false，你会发现 “Hello!” 消失了。</p>
<p>第二个例子演示了我们不仅可以<strong>绑定DOM文本到数据，也可以绑定DOM结构到数据</strong>。而且，Vue.js也提供一个强大的过渡效果系统，可以在Vue插入/删除元素时自动实现过渡效果。</p>
<p>也有一些其它指令，每个都有特殊的功能。例如v-for指令用于显示数组元素，v-bind指令用于绑定HTML特性。更多内容可以去官网查看API。</p>
<hr>
<h4 id="2-组合的视图组件"><a href="#2-组合的视图组件" class="headerlink" title="2.组合的视图组件"></a>2.组合的视图组件</h4><p>组件系统是Vue.js另一个重要概念，因为它提供了一种抽象，让我们可以用独立可复用的小组件来构建大型应用。如果我们考虑到这点，几乎任意类型的应用的界面都可以抽象为一个组件树：</p>
<p><img src="http://7xljcv.com1.z0.glb.clouddn.com/2016/04/11/components.png" alt="components" title="components"></p>
<p>实际上，一个典型的用Vue.js构建的大型应用将形成一个组件树。后续将详述组件，不过这里有一个假想的例子，看看使用了组件的应用模板是什么样的：<br>html代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">app-nav</span>&gt;</span><span class="tag">&lt;/<span class="name">app-nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">app-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">app-sidebar</span>&gt;</span><span class="tag">&lt;/<span class="name">app-sidebar</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">app-content</span>&gt;</span><span class="tag">&lt;/<span class="name">app-content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">app-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>你可能已经注意到Vue.js组件非常类似于自定义元素——它是Web组件规范的一部分。实际上Vue.js的组件语法参考了该规范。例如Vue组件实现了Slot API与is特性。但是，有几个关键的不同：</p>
<ol>
<li>Web组件规范仍然未完成，并且没有浏览器实现。相比之下，Vue.js组件不需要任何补丁，并且在所有支持的浏览器（IE9及更高版本）之下表现一致。必要时，Vue.js组件也可以放在原生自定义元素之内。</li>
<li>Vue.js组件提供了原生自定义元素所不具备的一些重要功能，比如组件间的数据流，自定义事件系统，以及动态的、带特效的组件替换。</li>
</ol>
<p>组件系统是用Vue.js构建大型应用的基础。另外，Vue.js生态系统也提供了高级工具与多种支持库，它们和Vue.js一起构成了一个更加“框架”性的系统。</p>
<p>最近还在继续深入学习Vue.js，最后想说：<br>个人认为前端的一些技术都是融会贯通的，学习一门语言或者框架本身并不是为了学习它的技术，最重要的是学习它的思维，只有思维层面得到了延伸，学习其他技术的时候才会得心应手。Vue带给我们的是前端一种解决问题的新的思维。</p>
<p>一句话概括：</p>
<blockquote>
<p>现阶段前端人员最大的问题不是技术实现，而是思维转变。</p>
</blockquote>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2016/04/23/前端工程化-Webpack/" style="float: left;">
        ← 前端工程化+Webpack
    </a>
    
    
    <a class="pull-right" href="/2016/04/04/一个爸爸每月要赚多少钱，才能撑起一个家/">
        一个爸爸每月要赚多少钱，才能撑起一个家 →
    </a>
    
</nav>

        <div class="duoshuo">
<div class="ds-thread" data-thread-key="2016/04/12/初识Vue-js/" data-title="初识Vue.js" data-url="http://vmartaw.com/2016/04/12/初识Vue-js/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"vmartaw"};
(function() {
	var ds = document.createElement('script');
	ds.type = 'text/javascript';ds.async = true;
	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	ds.charset = 'UTF-8';
	(document.getElementsByTagName('head')[0] 
	 || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p><span id="busuanzi_container_site_pv" style='display:none'>您是本站第<span id="busuanzi_value_site_pv"></span>位访问者</span></p>
                <p>
                    &copy; 2012<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By 吴伟. All Rights Reserved.
                </p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
        
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };
    
    resizeHero();
    
    $(window).resize(function () {
        resizeHero();
    });
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
